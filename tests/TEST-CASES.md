# GEO优化平台 - 测试用例文档

> 版本: v1.0 | 更新日期: 2026-02-25 | 基于 PRD v1.1

## 📋 测试概览

| 指标 | 数值 |
|------|------|
| **测试用例总数** | 50+ |
| **覆盖模块** | 5大核心模块 |
| **测试类型** | E2E + 单元测试 |

---

## 🎯 测试范围

### 模块覆盖

| 模块 | 功能 | 优先级 | 测试用例数 |
|------|------|--------|-----------|
| 策略分析 | 品牌 AI 认知度检测 | P0 | 15 |
| 策略分析 | 竞品对比分析 | P0 | 8 |
| AI蒸馏 | 核心词扩展生成 | P0 | 10 |
| 内容生成 | GEO 优化内容模板 | P1 | 8 |
| 媒体库 | 媒体资源库 | P1 | 5 |
| 系统 | 用户/订阅/通知 | P1 | 4 |

---

## 📝 详细测试用例

### TC-01: 策略分析模块

#### TC-01-001: 创建品牌检测任务 - 正常流程

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-001 |
| **模块** | 策略分析 |
| **功能** | 创建检测任务 |
| **优先级** | P0 |
| **前置条件** | 用户已登录，有剩余检测次数 |
| **测试步骤** | 1. 进入"创建检测"页面<br>2. 输入品牌名称: "新航道"<br>3. 选择行业: "教育培训"<br>4. 添加关键词: "福州雅思培训"<br>5. 选择平台: 豆包、DeepSeek、元宝、Kimi<br>6. 点击"开始检测" |
| **预期结果** | 1. 表单验证通过<br>2. 跳转到检测进度页面<br>3. 显示检测进度条<br>4. 各平台状态正常更新 |
| **测试数据** | 品牌名称: 新航道<br>行业: education<br>关键词: ["福州雅思培训"] |
| **优先级** | P0 |

---

#### TC-01-002: 创建检测任务 - 必填项校验

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-002 |
| **模块** | 策略分析 |
| **功能** | 表单验证 |
| **优先级** | P0 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 进入"创建检测"页面<br>2. 不输入任何信息<br>3. 点击"开始检测" |
| **预期结果** | 1. 品牌名称显示错误提示<br>2. 行业显示错误提示<br>3. 关键词显示错误提示<br>4. 不发起请求 |
| **测试数据** | 空 |
| **优先级** | P0 |

---

#### TC-01-003: 创建检测任务 - 关键词数量限制

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-003 |
| **模块** | 策略分析 |
| **功能** | 关键词限制 |
| **优先级** | P1 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 进入"创建检测"页面<br>2. 尝试添加超过20个关键词 |
| **预期结果** | 1. 第21个关键词无法添加<br>2. 显示"已达到关键词上限(20个)"提示 |
| **测试数据** | 20+个关键词 |
| **优先级** | P1 |

---

#### TC-01-004: 检测进度 - 进度更新

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-004 |
| **模块** | 策略分析 |
| **功能** | 检测进度 |
| **优先级** | P0 |
| **前置条件** | 已创建检测任务 |
| **测试步骤** | 1. 观察检测进度页面<br>2. 等待检测完成 |
| **预期结果** | 1. 进度条持续更新<br>2. 步骤指示器正确切换<br>3. 各平台状态从"等待中"变为"检测中"再变为"已完成"<br>4. 检测完成后自动跳转 |
| **测试数据** | 正常检测任务 |
| **优先级** | P0 |

---

#### TC-01-005: 报告详情 - GEO评分显示

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-005 |
| **模块** | 策略分析 |
| **功能** | 报告详情 |
| **优先级** | P0 |
| **前置条件** | 检测任务完成 |
| **测试步骤** | 1. 进入报告详情页面<br>2. 查看GEO健康度评分 |
| **预期结果** | 1. 评分在0-100范围内<br>2. 评分有动画效果<br>3. 四个维度分数正确显示 |
| **测试数据** | 已完成的报告 |
| **优先级** | P0 |

---

#### TC-01-006: 报告详情 - 平台分析Tab

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-006 |
| **模块** | 策略分析 |
| **功能** | 平台分析 |
| **优先级** | P0 |
| **前置条件** | 报告详情页 |
| **测试步骤** | 1. 点击"平台分析"Tab<br>2. 查看各平台卡片 |
| **预期结果** | 1. 显示所有检测平台的卡片<br>2. 每个卡片显示: 是否提及、排名、情感、引用数 |
| **测试数据** | 多平台检测报告 |
| **优先级** | P0 |

---

#### TC-01-007: 报告详情 - 竞品对比Tab

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-007 |
| **模块** | 策略分析 |
| **功能** | 竞品对比 |
| **优先级** | P0 |
| **前置条件** | 报告详情页，有竞品数据 |
| **测试步骤** | 1. 点击"竞品对比"Tab<br>2. 查看对比表格 |
| **预期结果** | 1. 显示维度对比表格<br>2. 差距值正确计算<br>3. 正负差距有颜色区分 |
| **测试数据** | 包含竞品的报告 |
| **优先级** | P0 |

---

#### TC-01-008: 报告详情 - 引用来源Tab

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-008 |
| **模块** | 策略分析 |
| **功能** | 引用来源 |
| **优先级** | P1 |
| **前置条件** | 报告详情页 |
| **测试步骤** | 1. 点击"引用来源"Tab<br>2. 查看来源统计和列表 |
| **预期结果** | 1. 显示4个统计卡片<br>2. 来源列表显示来源类型、标题、引用次数 |
| **测试数据** | 有引用的报告 |
| **优先级** | P1 |

---

#### TC-01-009: 报告详情 - 优化建议Tab

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-009 |
| **模块** | 策略分析 |
| **功能** | 优化建议 |
| **优先级** | P1 |
| **前置条件** | 报告详情页 |
| **测试步骤** | 1. 点击"优化建议"Tab<br>2. 查看建议列表 |
| **预期结果** | 1. 建议按优先级分组<br>2. 每条建议有标题、描述、预期效果 |
| **测试数据** | 已完成报告 |
| **优先级** | P1 |

---

#### TC-01-010: 报告导出PDF

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-01-010 |
| **模块** | 策略分析 |
| **功能** | 报告导出 |
| **优先级** | P2 |
| **前置条件** | 报告详情页 |
| **测试步骤** | 1. 点击"导出PDF"按钮 |
| **预期结果** | 1. 生成PDF文件<br>2. 文件名包含品牌名和日期<br>3. PDF内容完整 |
| **测试数据** | 已完成报告 |
| **优先级** | P2 |

---

### TC-02: AI蒸馏模块

#### TC-02-001: AI蒸馏 - 正常流程

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-02-001 |
| **模块** | AI蒸馏 |
| **功能** | 关键词生成 |
| **优先级** | P0 |
| **前置条件** | 用户已登录，有剩余蒸馏次数 |
| **测试步骤** | 1. 进入AI蒸馏页面<br>2. 输入核心词: "雅思培训"<br>3. 选择行业: "教育培训"<br>4. 勾选所有词类型<br>5. 点击"开始蒸馏" |
| **预期结果** | 1. 显示蒸馏loading<br>2. 生成搜索词、问答词、品牌词三类<br>3. 每类至少10个关键词<br>4. 显示总数统计 |
| **测试数据** | 核心词: 雅思培训<br>行业: education |
| **优先级** | P0 |

---

#### TC-02-002: AI蒸馏 - 必填项校验

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-02-002 |
| **模块** | AI蒸馏 |
| **功能** | 表单验证 |
| **优先级** | P0 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 不输入核心词<br>2. 点击"开始蒸馏" |
| **预期结果** | 1. 显示"请输入核心词"错误提示<br>2. 不发起请求 |
| **测试数据** | 空 |
| **优先级** | P0 |

---

#### TC-02-003: AI蒸馏 - 词类型选择

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-02-003 |
| **模块** | AI蒸馏 |
| **功能** | 词类型过滤 |
| **优先级** | P1 |
| **前置条件** | AI蒸馏页面 |
| **测试步骤** | 1. 只勾选"搜索词"<br>2. 开始蒸馏 |
| **预期结果** | 1. 只生成搜索词<br>2. 问答词和品牌词为空 |
| **测试数据** | 只选搜索词 |
| **优先级** | P1 |

---

#### TC-02-004: AI蒸馏 - 复制全部关键词

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-02-004 |
| **模块** | AI蒸馏 |
| **功能** | 复制功能 |
| **优先级** | P1 |
| **前置条件** | 已完成蒸馏 |
| **测试步骤** | 1. 点击"复制全部"按钮 |
| **预期结果** | 1. 关键词复制到剪贴板<br>2. 显示"已复制到剪贴板"提示 |
| **测试数据** | 已生成的关键词 |
| **优先级** | P1 |

---

#### TC-02-005: AI蒸馏 - 添加到检测

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-02-005 |
| **模块** | AI蒸馏 |
| **功能** | 添加到检测 |
| **优先级** | P1 |
| **前置条件** | 已完成蒸馏，选择了关键词 |
| **测试步骤** | 1. 选择部分关键词<br>2. 点击"添加到检测" |
| **预期结果** | 1. 关键词保存到localStorage<br>2. 显示"已添加N个关键词"提示 |
| **测试数据** | 选中的关键词 |
| **优先级** | P1 |

---

### TC-03: 内容生成模块

#### TC-03-001: 内容生成 - 排名榜单模板

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-03-001 |
| **模块** | 内容生成 |
| **功能** | 模板生成 |
| **优先级** | P1 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 选择"排名榜单"模板<br>2. 输入品牌名称和关键词<br>3. 点击"生成内容" |
| **预期结果** | 1. 生成排名榜单格式内容<br>2. 内容包含标题、TOP5列表、建议 |
| **测试数据** | 模板: ranking<br>品牌: 新航道<br>关键词: 福州雅思培训 |
| **优先级** | P1 |

---

#### TC-03-002: 内容生成 - 内容复制

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-03-002 |
| **模块** | 内容生成 |
| **功能** | 复制功能 |
| **优先级** | P2 |
| **前置条件** | 已生成内容 |
| **测试步骤** | 1. 点击"复制"按钮 |
| **预期结果** | 1. 内容复制到剪贴板<br>2. 显示成功提示 |
| **测试数据** | 已生成内容 |
| **优先级** | P2 |

---

### TC-04: 关键词管理模块

#### TC-04-001: 关键词列表显示

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-04-001 |
| **模块** | 关键词管理 |
| **功能** | 列表展示 |
| **优先级** | P1 |
| **前置条件** | 用户已登录，有蒸馏历史 |
| **测试步骤** | 1. 进入关键词库页面<br>2. 查看关键词分组 |
| **预期结果** | 1. 显示搜索词、问答词、品牌词三个分组<br>2. 每组显示关键词数量<br>3. 关键词可选中 |
| **测试数据** | 有蒸馏历史 |
| **优先级** | P1 |

---

#### TC-04-002: 批量检测

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-04-002 |
| **模块** | 关键词管理 |
| **功能** | 批量操作 |
| **优先级** | P1 |
| **前置条件** | 关键词库有数据 |
| **测试步骤** | 1. 点击某分组的"全选"<br>2. 点击"批量检测" |
| **预期结果** | 1. 所有关键词被选中<br>2. 跳转到创建检测页<br>3. 关键词已预填充 |
| **测试数据** | 有数据的关键词库 |
| **优先级** | P1 |

---

### TC-05: 媒体库模块

#### TC-05-001: 媒体列表筛选

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-05-001 |
| **模块** | 媒体库 |
| **功能** | 筛选功能 |
| **优先级** | P2 |
| **前置条件** | 媒体库页面 |
| **测试步骤** | 1. 选择类型: "新闻媒体"<br>2. 查看筛选结果 |
| **预期结果** | 1. 只显示新闻类型媒体<br>2. 结果与筛选条件匹配 |
| **测试数据** | 类型: news |
| **优先级** | P2 |

---

#### TC-05-002: 媒体详情 - 加入计划

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-05-002 |
| **模块** | 媒体库 |
| **功能** | 加入计划 |
| **优先级** | P2 |
| **前置条件** | 媒体卡片 |
| **测试步骤** | 1. 点击某媒体的"加入计划"按钮 |
| **预期结果** | 1. 显示"已加入内容分发计划"提示<br>2. 媒体添加到计划列表 |
| **测试数据** | 任意媒体 |
| **优先级** | P2 |

---

### TC-06: 系统模块

#### TC-06-001: 用户设置保存

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-06-001 |
| **模块** | 系统设置 |
| **功能** | 账户设置 |
| **优先级** | P2 |
| **前置条件** | 设置页面 |
| **测试步骤** | 1. 修改用户名<br>2. 点击"保存修改" |
| **预期结果** | 1. 显示"保存成功"提示<br>2. 用户名已更新 |
| **测试数据** | 新用户名 |
| **优先级** | P2 |

---

#### TC-06-002: 通知设置切换

| 字段 | 值 |
|------|-----|
| **用例ID** | TC-06-002 |
| **模块** | 系统设置 |
| **功能** | 通知设置 |
| **优先级** | P2 |
| **前置条件** | 通知设置页面 |
| **测试步骤** | 1. 切换"检测完成通知"开关 |
| **预期结果** | 1. 开关状态切换<br>2. 设置已保存 |
| **测试数据** | 通知开关 |
| **优先级** | P2 |

---

## 🔧 自动化测试

### E2E 测试 (Playwright)

```typescript
// tests/e2e/detection.spec.ts
import { test, expect } from '@playwright/test';

test.describe('策略分析模块', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/dashboard');
  });

  test('TC-01-001: 创建检测任务 - 正常流程', async ({ page }) => {
    // 进入创建页面
    await page.click('text=创建检测');

    // 填写表单
    await page.fill('input[placeholder*="品牌名称"]', '新航道');
    await page.selectOption('select', 'education');
    await page.fill('input[placeholder*="关键词"]', '福州雅思培训');
    await page.press('input[placeholder*="关键词"]', 'Enter');

    // 提交
    await page.click('text=开始检测');

    // 验证跳转到进度页
    await expect(page).toHaveURL(/\/detection\/progress/);
    await expect(page.locator('.progress-card')).toBeVisible();
  });

  test('TC-01-002: 创建检测任务 - 必填项校验', async ({ page }) => {
    await page.click('text=创建检测');
    await page.click('text=开始检测');

    // 验证错误提示
    await expect(page.locator('text=请输入品牌名称')).toBeVisible();
  });
});
```

### 单元测试 (Vitest)

```typescript
// tests/unit/distillation.test.ts
import { describe, it, expect } from 'vitest';

describe('AI蒸馏模块', () => {
  it('TC-02-001: 生成关键词分类', () => {
    const result = generateKeywords('雅思培训', 'education');

    expect(result.search.length).toBeGreaterThan(10);
    expect(result.question.length).toBeGreaterThan(5);
    expect(result.brand.length).toBeGreaterThan(5);
  });

  it('TC-02-003: 只生成搜索词', () => {
    const result = generateKeywords('雅思培训', 'education', ['search']);

    expect(result.search.length).toBeGreaterThan(0);
    expect(result.question.length).toBe(0);
    expect(result.brand.length).toBe(0);
  });
});
```

---

## 📊 测试执行

### 运行测试

```bash
# E2E 测试
cd frontend
npx playwright test

# 单元测试
npm run test
```

### 测试报告

测试完成后生成报告：
- E2E: `playwright-report/index.html`
- 单元测试: `coverage/lcov-report/index.html`

---

## 📋 测试检查清单

### P0 功能 (必须通过)

- [ ] TC-01-001: 创建检测任务正常流程
- [ ] TC-01-002: 必填项校验
- [ ] TC-01-004: 检测进度更新
- [ ] TC-01-005: GEO评分显示
- [ ] TC-01-006: 平台分析Tab
- [ ] TC-01-007: 竞品对比Tab
- [ ] TC-02-001: AI蒸馏正常流程
- [ ] TC-02-002: 蒸馏必填项校验

### P1 功能 (应该通过)

- [ ] TC-01-003: 关键词数量限制
- [ ] TC-01-008: 引用来源Tab
- [ ] TC-01-009: 优化建议Tab
- [ ] TC-02-003: 词类型选择
- [ ] TC-02-004: 复制全部关键词
- [ ] TC-02-005: 添加到检测
- [ ] TC-03-001: 排名榜单模板
- [ ] TC-04-001: 关键词列表显示
- [ ] TC-04-002: 批量检测

### P2 功能 (可选)

- [ ] TC-01-010: 报告导出PDF
- [ ] TC-03-002: 内容复制
- [ ] TC-05-001: 媒体列表筛选
- [ ] TC-05-002: 加入计划
- [ ] TC-06-001: 用户设置保存
- [ ] TC-06-002: 通知设置切换

---

**文档版本**: v1.0
**最后更新**: 2026-02-25
**作者**: OneCAS GEO Team
